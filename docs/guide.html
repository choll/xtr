

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>XTR Logger User Guide &mdash; XTR Documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API Reference" href="api.html" />
    <link rel="prev" title="Quick-Start Guide" href="quickstart.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> xtr
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
    
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick-Start Guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">User Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-and-writing-to-sinks">Creating and Writing to Sinks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#format-string-syntax">Format String Syntax</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#passing-arguments-by-value-or-reference">Passing Arguments by Value or Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id3">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#string-arguments">String Arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="#log-levels">Log Levels</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#debug-log-statements">Debug Log Statements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fatal-log-statements">Fatal Log Statements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#thread-safety">Thread Safety</a></li>
<li class="toctree-l2"><a class="reference internal" href="#custom-formatters">Custom Formatters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id5">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#formatting-containers-tuples-and-pairs">Formatting Containers, Tuples and Pairs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#time-sources">Time Sources</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#basic">Basic</a></li>
<li class="toctree-l3"><a class="reference internal" href="#real-time-clock">Real-time Clock</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tsc">TSC</a></li>
<li class="toctree-l3"><a class="reference internal" href="#user-supplied-timestamp">User-Supplied Timestamp</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id7">Examples</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#background-consumer-thread-details">Background Consumer Thread Details</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lifetime">Lifetime</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cpu-affinity">CPU Affinity</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id8">Examples</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#log-message-sanitizing">Log Message Sanitizing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#log-rotation">Log Rotation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#custom-back-ends">Custom Back-ends</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id9">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#custom-log-level-styles">Custom Log Level Styles</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id10">Examples</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="xtrctl.html">xtrctl</a></li>
</ul>

            
          
    <a href="genindex.html">Index</a>
  
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">xtr</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>XTR Logger User Guide</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/guide.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="user-guide">
<h1>User Guide<a class="headerlink" href="#user-guide" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The XTR API contains two classes; <a class="reference internal" href="api.html#_CPPv4N3xtr6loggerE" title="xtr::logger"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">xtr::logger</span></code></a> and
<a class="reference internal" href="api.html#_CPPv4N3xtr4sinkE" title="xtr::sink"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">xtr::sink</span></code></a>. Sinks each contain a queue <a class="footnote-reference brackets" href="#queue" id="id1">1</a>, and
pass log messages to the associated logger via these queues. Each logger
has a background consumer thread which reads from the sinks that were created from the
logger. The background thread then formats the log message and either writes it
to disk or passes it to a custom back-end if one is in use.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+------+</span>
<span class="o">|</span> <span class="n">Sink</span> <span class="o">|---</span><span class="p">[</span><span class="n">queue</span><span class="p">]</span><span class="o">---+</span>
<span class="o">+------+</span>             <span class="o">|</span>
                     <span class="o">|</span>     <span class="o">+--------+</span>
<span class="o">+------+</span>             <span class="o">+---&gt;</span> <span class="o">|</span>        <span class="o">|</span>     <span class="o">+----------------------------+</span>
<span class="o">|</span> <span class="n">Sink</span> <span class="o">|---</span><span class="p">[</span><span class="n">queue</span><span class="p">]</span><span class="o">-------&gt;</span> <span class="o">|</span> <span class="n">Logger</span> <span class="o">|---&gt;</span> <span class="o">|</span> <span class="n">Back</span><span class="o">-</span><span class="n">end</span><span class="p">;</span> <span class="n">file</span><span class="o">/</span><span class="n">network</span><span class="o">/</span><span class="n">etc</span> <span class="o">|</span>
<span class="o">+------+</span>             <span class="o">+---&gt;</span> <span class="o">|</span>        <span class="o">|</span>     <span class="o">+----------------------------+</span>
                     <span class="o">|</span>     <span class="o">+--------+</span>
<span class="o">+------+</span>             <span class="o">|</span>
<span class="o">|</span> <span class="n">Sink</span> <span class="o">|---</span><span class="p">[</span><span class="n">queue</span><span class="p">]</span><span class="o">---+</span>
<span class="o">+------+</span>
</pre></div>
</div>
<p>An application is expected to use multiple sinks, for example a sink per thread, or
sink per component. To support this sinks have a name associated with them which
is included in the output log message. Sink names do not need to be unique.</p>
</div>
<div class="section" id="creating-and-writing-to-sinks">
<h2>Creating and Writing to Sinks<a class="headerlink" href="#creating-and-writing-to-sinks" title="Permalink to this headline">¶</a></h2>
<p>Sinks are created either by calling <a class="reference internal" href="api.html#_CPPv4N3xtr6logger8get_sinkENSt6stringE" title="xtr::logger::get_sink"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">xtr::logger::get_sink()</span></code></a>, via normal
construction followed by a call to <a class="reference internal" href="api.html#_CPPv4N3xtr6logger13register_sinkER4sinkNSt6stringE" title="xtr::logger::register_sink"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">xtr::logger::register_sink()</span></code></a>, or by
copying another sink. Copied sinks are registered to the same logger and have the
same name as the source sink. Sinks may be renamed by calling <a class="reference internal" href="api.html#_CPPv4N3xtr4sink8set_nameENSt6stringE" title="xtr::sink::set_name"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">xtr::sink::set_name()</span></code></a>.
Once a sink has been created or registered, it may be written to using one of several
log macros which are described in the <a class="reference internal" href="api.html#log-macros"><span class="std std-ref">log macros</span></a> section.</p>
<div class="section" id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h3>
<p>Sink creation via <a class="reference internal" href="api.html#_CPPv4N3xtr6logger8get_sinkENSt6stringE" title="xtr::logger::get_sink"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">xtr::logger::get_sink()</span></code></a>:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;xtr/logger.hpp&gt;</span><span class="cp"></span>

<span class="n">xtr</span><span class="o">::</span><span class="n">logger</span><span class="w"> </span><span class="n">log</span><span class="p">;</span><span class="w"></span>

<span class="n">xtr</span><span class="o">::</span><span class="n">sink</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">log</span><span class="p">.</span><span class="n">get_sink</span><span class="p">(</span><span class="s">&quot;Main&quot;</span><span class="p">);</span><span class="w"></span>

<span class="n">XTR_LOG</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello world&quot;</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>View this example on <a class="reference external" href="https://godbolt.org/z/1GWbEPq8T">Compiler Explorer</a>.</p>
<p>Sink creation via <a class="reference internal" href="api.html#_CPPv4N3xtr6logger13register_sinkER4sinkNSt6stringE" title="xtr::logger::register_sink"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">xtr::logger::register_sink()</span></code></a>:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;xtr/logger.hpp&gt;</span><span class="cp"></span>

<span class="n">xtr</span><span class="o">::</span><span class="n">logger</span><span class="w"> </span><span class="n">log</span><span class="p">;</span><span class="w"></span>
<span class="n">xtr</span><span class="o">::</span><span class="n">sink</span><span class="w"> </span><span class="n">s</span><span class="p">;</span><span class="w"></span>

<span class="n">log</span><span class="p">.</span><span class="n">register_sink</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Main&quot;</span><span class="p">);</span><span class="w"></span>

<span class="n">XTR_LOG</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello world&quot;</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>View this example on <a class="reference external" href="https://godbolt.org/z/cobj4n3Gx">Compiler Explorer</a>.</p>
<p>Sink creation via copying:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;xtr/logger.hpp&gt;</span><span class="cp"></span>

<span class="n">xtr</span><span class="o">::</span><span class="n">logger</span><span class="w"> </span><span class="n">log</span><span class="p">;</span><span class="w"></span>

<span class="n">xtr</span><span class="o">::</span><span class="n">sink</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">log</span><span class="p">.</span><span class="n">get_sink</span><span class="p">(</span><span class="s">&quot;Main&quot;</span><span class="p">);</span><span class="w"></span>
<span class="n">xtr</span><span class="o">::</span><span class="n">sink</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s1</span><span class="p">;</span><span class="w"></span>

<span class="n">s2</span><span class="p">.</span><span class="n">set_name</span><span class="p">(</span><span class="s">&quot;Copy&quot;</span><span class="p">);</span><span class="w"></span>

<span class="n">XTR_LOG</span><span class="p">(</span><span class="n">s1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello world&quot;</span><span class="p">);</span><span class="w"></span>
<span class="n">XTR_LOG</span><span class="p">(</span><span class="n">s2</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello world&quot;</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>View this example on <a class="reference external" href="https://godbolt.org/z/9bGTG38ez">Compiler Explorer</a>.</p>
</div>
</div>
<div class="section" id="format-string-syntax">
<h2>Format String Syntax<a class="headerlink" href="#format-string-syntax" title="Permalink to this headline">¶</a></h2>
<p>XTR uses <a class="reference external" href="https://fmt.dev">{fmt}</a> for formatting, so format strings follow the
same Python <a class="reference external" href="https://docs.python.org/3/library/string.html#formatstrings">str.format</a>
style formatting as found in {fmt}. The {fmt} format string documentation can be found
<a class="reference external" href="https://fmt.dev/latest/syntax.html">here</a>.</p>
<div class="section" id="id2">
<h3>Examples<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;xtr/logger.hpp&gt;</span><span class="cp"></span>

<span class="n">xtr</span><span class="o">::</span><span class="n">logger</span><span class="w"> </span><span class="n">log</span><span class="p">;</span><span class="w"></span>

<span class="n">xtr</span><span class="o">::</span><span class="n">sink</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">log</span><span class="p">.</span><span class="n">get_sink</span><span class="p">(</span><span class="s">&quot;Main&quot;</span><span class="p">);</span><span class="w"></span>

<span class="n">XTR_LOG</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">123</span><span class="p">);</span><span class="w"> </span><span class="c1">// Hello 123</span>
<span class="n">XTR_LOG</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">123.456</span><span class="p">);</span><span class="w"> </span><span class="c1">// Hello 123.456</span>
<span class="n">XTR_LOG</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello {:.1f}&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">123.456</span><span class="p">);</span><span class="w"> </span><span class="c1">// Hello 123.1</span>
</pre></div>
</div>
<p>View this example on <a class="reference external" href="https://godbolt.org/z/zxs7WThM6">Compiler Explorer</a>.</p>
</div>
</div>
<div class="section" id="passing-arguments-by-value-or-reference">
<span id="copy-val-ref"></span><h2>Passing Arguments by Value or Reference<a class="headerlink" href="#passing-arguments-by-value-or-reference" title="Permalink to this headline">¶</a></h2>
<p>The default behaviour of the logger is to copy format arguments into the
specified sink by value. Note that no allocations are be performed by the
logger when this is done. If copying is undesirable then arguments may be
passed by reference by wrapping them in a call to <a class="reference internal" href="api.html#_CPPv4I0EN3xtr6nocopyEDaRK1T" title="xtr::nocopy"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">xtr::nocopy()</span></code></a>.</p>
<div class="section" id="id3">
<h3>Examples<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;xtr/logger.hpp&gt;</span><span class="cp"></span>

<span class="n">xtr</span><span class="o">::</span><span class="n">logger</span><span class="w"> </span><span class="n">log</span><span class="p">;</span><span class="w"></span>

<span class="n">xtr</span><span class="o">::</span><span class="n">sink</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">log</span><span class="p">.</span><span class="n">get_sink</span><span class="p">(</span><span class="s">&quot;Main&quot;</span><span class="p">);</span><span class="w"></span>

<span class="k">static</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">arg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;world&quot;</span><span class="p">;</span><span class="w"></span>

<span class="c1">// Here &#39;arg&#39; is passed by reference:</span>
<span class="n">XTR_LOG</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">nocopy</span><span class="p">(</span><span class="n">arg</span><span class="p">));</span><span class="w"></span>

<span class="c1">// Here &#39;arg&#39; is passed by value:</span>
<span class="n">XTR_LOG</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">arg</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>View this example on <a class="reference external" href="https://godbolt.org/z/j5ebhWfdT">Compiler Explorer</a>.</p>
</div>
</div>
<div class="section" id="string-arguments">
<span id="string-args"></span><h2>String Arguments<a class="headerlink" href="#string-arguments" title="Permalink to this headline">¶</a></h2>
<p>Passing strings to the logger is guaranteed to not allocate memory, and does
not assume anything about the lifetime of the string data. i.e. for the
following log statement:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">XTR_LOG</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">str</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>If <cite>str</cite> is a <span class="cpp-expr sig sig-inline cpp"><span class="n">std</span><span class="p">::</span><span class="n">string</span></span>, <span class="cpp-expr sig sig-inline cpp"><span class="n">std</span><span class="p">::</span><span class="n">string_view</span></span>,
<span class="cpp-expr sig sig-inline cpp"><span class="kt">char</span><span class="p">*</span></span> or <span class="cpp-expr sig sig-inline cpp"><span class="kt">char</span><span class="p">[</span><span class="p">]</span></span> then the contents of <cite>str</cite> will be copied
into <cite>sink</cite> without incurring any allocations. The entire statement is guaranteed
to not allocate—i.e. even if <span class="cpp-expr sig sig-inline cpp"><span class="n">std</span><span class="p">::</span><span class="n">string</span></span> is passed, the
<span class="cpp-expr sig sig-inline cpp"><span class="n">std</span><span class="p">::</span><span class="n">string</span></span> copy constructor is not invoked and no allocation occurs.
String data is copied in order to provide safe default behaviour regarding the
lifetime of the string data. If copying the string data is undesirable then
string arguments may be wrapped in a call to <a class="reference internal" href="api.html#_CPPv4I0EN3xtr6nocopyEDaRK1T" title="xtr::nocopy"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">xtr::nocopy()</span></code></a>:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">XTR_LOG</span><span class="p">(</span><span class="n">sink</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">nocopy</span><span class="p">(</span><span class="n">str</span><span class="p">));</span><span class="w"></span>
</pre></div>
</div>
<p>If this is done then only a pointer to the string data contained in <cite>str</cite> is
copied. The user is then responsible for ensuring that the string data remains
valid long enough for the logger to process the log statement. Note that only
the string data must remain valid—so for <span class="cpp-expr sig sig-inline cpp"><span class="n">std</span><span class="p">::</span><span class="n">string_view</span></span> the
object itself does not need to remain valid, just the data it references.</p>
</div>
<div class="section" id="log-levels">
<h2>Log Levels<a class="headerlink" href="#log-levels" title="Permalink to this headline">¶</a></h2>
<p>The logger supports debug, info, warning, error and fatal log levels, which
are enumerated in the <a class="reference internal" href="api.html#_CPPv4N3xtr11log_level_tE" title="xtr::log_level_t"><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">xtr::log_level_t</span></code></a> enum. Log statements with
these levels may be produced using the <a class="reference internal" href="api.html#c.XTR_LOGL" title="XTR_LOGL"><code class="xref c c-macro docutils literal notranslate"><span class="pre">XTR_LOGL</span></code></a> macro, along with
additional macros that are described in the <a class="reference internal" href="api.html#log-macros"><span class="std std-ref">log macros</span></a>
section of the API reference, all of which follow the convention of containing
“LOGL” in the macro name.</p>
<p>Each sink has its own log level, which can be programmatically set or queried
via <a class="reference internal" href="api.html#_CPPv4N3xtr4sink9set_levelE11log_level_t" title="xtr::sink::set_level"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">xtr::sink::set_level()</span></code></a> and <a class="reference internal" href="api.html#_CPPv4NK3xtr4sink5levelEv" title="xtr::sink::level"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">xtr::sink::level()</span></code></a>, and can
be set or queried from the command line using the <a class="reference internal" href="xtrctl.html#xtrctl"><span class="std std-ref">xtrctl</span></a> tool.</p>
<p>Each log level has an order of importance. The listing of levels above is in
the order of increasing importance—so the least important level is ‘debug’
and the most important level is ‘fatal’. If a log statement is made with a
level that is lower than the current level of the sink then the log statement
is discarded. Note that this includes any calls made as arguments to the log,
so in the following example the function <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">foo()</span></code> is not called:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;xtr/logger.hpp&gt;</span><span class="cp"></span>

<span class="n">xtr</span><span class="o">::</span><span class="n">logger</span><span class="w"> </span><span class="n">log</span><span class="p">;</span><span class="w"></span>

<span class="n">xtr</span><span class="o">::</span><span class="n">sink</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">log</span><span class="p">.</span><span class="n">get_sink</span><span class="p">(</span><span class="s">&quot;Main&quot;</span><span class="p">);</span><span class="w"></span>

<span class="n">s</span><span class="p">.</span><span class="n">set_level</span><span class="p">(</span><span class="n">xtr</span><span class="o">::</span><span class="n">log_level_t</span><span class="o">::</span><span class="n">error</span><span class="p">);</span><span class="w"></span>

<span class="n">XTR_LOGL</span><span class="p">(</span><span class="n">info</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">foo</span><span class="p">());</span><span class="w"></span>
</pre></div>
</div>
<p>View this example on <a class="reference external" href="https://godbolt.org/z/ss36qzo1c">Compiler Explorer</a>.</p>
<div class="section" id="debug-log-statements">
<h3>Debug Log Statements<a class="headerlink" href="#debug-log-statements" title="Permalink to this headline">¶</a></h3>
<p>Debug log statements can be disabled by defining XTR_NDEBUG.</p>
</div>
<div class="section" id="fatal-log-statements">
<h3>Fatal Log Statements<a class="headerlink" href="#fatal-log-statements" title="Permalink to this headline">¶</a></h3>
<p>Fatal log statements will additionally call <a class="reference internal" href="api.html#_CPPv4N3xtr4sink4syncEv" title="xtr::sink::sync"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">xtr::sink::sync()</span></code></a> followed
by <a class="reference external" href="https://www.man7.org/linux/man-pages/man3/abort.3.html">abort(3)</a>.</p>
</div>
</div>
<div class="section" id="thread-safety">
<h2>Thread Safety<a class="headerlink" href="#thread-safety" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><p>All functions in <a class="reference internal" href="api.html#_CPPv4N3xtr6loggerE" title="xtr::logger"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">xtr::logger</span></code></a> are thread-safe.</p></li>
<li><p>No functions in <a class="reference internal" href="api.html#_CPPv4N3xtr4sinkE" title="xtr::sink"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">xtr::sink</span></code></a> are thread-safe other than
<a class="reference internal" href="api.html#_CPPv4NK3xtr4sink5levelEv" title="xtr::sink::level"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">xtr::sink::level()</span></code></a> and <a class="reference internal" href="api.html#_CPPv4N3xtr4sink9set_levelE11log_level_t" title="xtr::sink::set_level"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">xtr::sink::set_level()</span></code></a>.
This is because each thread is expected to have its own sink(s).</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="custom-formatters">
<span id="id4"></span><h2>Custom Formatters<a class="headerlink" href="#custom-formatters" title="Permalink to this headline">¶</a></h2>
<p>Custom formatters are implemented the same as in <a class="reference external" href="https://fmt.dev">{fmt}</a>,
which is done either by:</p>
<ul class="simple">
<li><p>Providing a <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">std::stream&amp;</span> <span class="pre">operator&lt;&lt;(std::stream&amp;,</span> <span class="pre">T&amp;)()</span></code> overload. Note
that fmt/ostream.h must be included.</p></li>
<li><p>Specializing <span class="cpp-expr sig sig-inline cpp"><span class="n">fmt</span><span class="p">::</span><span class="n">formatter</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span></span> and implementing the <cite>parse</cite> and
<cite>format</cite> methods as described by the <cite>{fmt}</cite> documentation
<a class="reference external" href="https://fmt.dev/latest/api.html#formatting-user-defined-types">here</a>.</p></li>
</ul>
<div class="section" id="id5">
<h3>Examples<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>Formatting a custom type via operator&lt;&lt;:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;xtr/logger.hpp&gt;</span><span class="cp"></span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;fmt/ostream.h&gt;</span><span class="cp"></span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;ostream&gt;</span><span class="cp"></span>

<span class="k">namespace</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">custom</span><span class="w"> </span><span class="p">{};</span><span class="w"></span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span><span class="w"> </span><span class="n">os</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">custom</span><span class="o">&amp;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">os</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;custom&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="n">main</span><span class="p">()</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">xtr</span><span class="o">::</span><span class="n">logger</span><span class="w"> </span><span class="n">log</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">xtr</span><span class="o">::</span><span class="n">sink</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">log</span><span class="p">.</span><span class="n">get_sink</span><span class="p">(</span><span class="s">&quot;Main&quot;</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">XTR_LOG</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">custom</span><span class="p">());</span><span class="w"></span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>View this example on <a class="reference external" href="https://godbolt.org/z/cK14z5Kr6">Compiler Explorer</a>.</p>
<p>Formatting a custom type via fmt::formatter:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;xtr/logger.hpp&gt;</span><span class="cp"></span>

<span class="k">namespace</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">custom</span><span class="w"> </span><span class="p">{};</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">template</span><span class="o">&lt;&gt;</span><span class="w"></span>
<span class="k">struct</span><span class="w"> </span><span class="nc">fmt</span><span class="o">::</span><span class="n">formatter</span><span class="o">&lt;</span><span class="n">custom</span><span class="o">&gt;</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">ParseContext</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">    </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">parse</span><span class="p">(</span><span class="n">ParseContext</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ctx</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ctx</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">FormatContext</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">format</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">custom</span><span class="o">&amp;</span><span class="p">,</span><span class="w"> </span><span class="n">FormatContext</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ctx</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">format_to</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="n">out</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;custom&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">xtr</span><span class="o">::</span><span class="n">logger</span><span class="w"> </span><span class="n">log</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">xtr</span><span class="o">::</span><span class="n">sink</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">log</span><span class="p">.</span><span class="n">get_sink</span><span class="p">(</span><span class="s">&quot;Main&quot;</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">XTR_LOG</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">custom</span><span class="p">());</span><span class="w"></span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>View this example on <a class="reference external" href="https://godbolt.org/z/W56zdWEh1">Compiler Explorer</a>.</p>
</div>
</div>
<div class="section" id="formatting-containers-tuples-and-pairs">
<h2>Formatting Containers, Tuples and Pairs<a class="headerlink" href="#formatting-containers-tuples-and-pairs" title="Permalink to this headline">¶</a></h2>
<p>Formatters for containers, tuples and pairs are provided in
<cite>xtr/formatters.hpp</cite>. Types which will be formatted are:</p>
<ul class="simple">
<li><p>Any non-string iterable type—specifically any type that meets all of the
following criteria;</p>
<ol class="arabic simple">
<li><p>Is not constructible from <span class="cpp-expr sig sig-inline cpp"><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="p">*</span></span>.</p></li>
<li><p><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">std::begin()</span></code> and <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">std::end()</span></code> are defined.</p></li>
<li><p>Is not an associative container.</p></li>
</ol>
</li>
<li><p>Any associative container—specifically any type that provides a
<code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">mapped_type</span></code> member.</p></li>
<li><p>Any tuple-like type—specifically any type for which a
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">std::tuple_size</span></code> overload is defined.</p></li>
</ul>
</div>
<div class="section" id="time-sources">
<span id="id6"></span><h2>Time Sources<a class="headerlink" href="#time-sources" title="Permalink to this headline">¶</a></h2>
<p>The logger provides a choice of time-sources when logging messages, each with
varying levels of accuracy and performance. The options are listed below.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 43%" />
<col style="width: 25%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Source</p></th>
<th class="head"><p>Accuracy</p></th>
<th class="head"><p>Performance</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Basic</p></td>
<td><p>Low</p></td>
<td><p>High</p></td>
</tr>
<tr class="row-odd"><td><p>Real-time Clock</p></td>
<td><p>Medium</p></td>
<td><p>Medium</p></td>
</tr>
<tr class="row-even"><td><p>TSC</p></td>
<td><p>High</p></td>
<td><p>Low/Medium</p></td>
</tr>
<tr class="row-odd"><td><p>User supplied</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>The performance of the TSC source is listed as either low or medium as it depends
on the particular CPU.</p>
<div class="section" id="basic">
<span id="basic-time-source"></span><h3>Basic<a class="headerlink" href="#basic" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="api.html#c.XTR_LOG" title="XTR_LOG"><code class="xref c c-macro docutils literal notranslate"><span class="pre">XTR_LOG</span></code></a> macro and it’s variants listed under the
<a class="reference internal" href="api.html#log-macros"><span class="std std-ref">basic macros</span></a> section of the API reference all use the basic
time source. In these macros no timestamp is read when the log message is written
to the sink’s queue, instead the logger’s background thread reads the timestamp when
the log message is read from the queue. This is of course not accurate, but it is
fast.</p>
<p><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">std::chrono::system_clock()</span></code> is used to read the current time, this can
be customised by passing an arbitrary function to the ‘clock’ parameter when
constructing the logger (see <a class="reference internal" href="api.html#_CPPv4I0EN3xtr6logger6loggerEPKcRR5ClockNSt6stringE17log_level_style_t" title="xtr::logger::logger"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">xtr::logger::logger()</span></code></a>). In these macros</p>
</div>
<div class="section" id="real-time-clock">
<h3>Real-time Clock<a class="headerlink" href="#real-time-clock" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="api.html#c.XTR_LOG_RTC" title="XTR_LOG_RTC"><code class="xref c c-macro docutils literal notranslate"><span class="pre">XTR_LOG_RTC</span></code></a> macro and it’s variants listed under the
<a class="reference internal" href="api.html#rtc-macros"><span class="std std-ref">real-time clock macros</span></a> section of the API reference all use the
real-time clock source. In these macros the timestamp is read using
<a class="reference external" href="https://www.man7.org/linux/man-pages/man3/clock_gettime.3.html">clock_gettime(3)</a>
with a clock source of either CLOCK_REALTIME_COARSE on Linux or CLOCK_REALTIME_FAST
on FreeBSD.</p>
</div>
<div class="section" id="tsc">
<h3>TSC<a class="headerlink" href="#tsc" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="api.html#c.XTR_LOG_TSC" title="XTR_LOG_TSC"><code class="xref c c-macro docutils literal notranslate"><span class="pre">XTR_LOG_TSC</span></code></a> macro and it’s variants listed under the
<a class="reference internal" href="api.html#tsc-macros"><span class="std std-ref">TSC macros</span></a> section of the API reference all use the TSC
clock source. In these macros the timestamp is read from the CPU timestamp
counter via the RDTSC instruction. The TSC time source is is listed in the
table above as either low or medium performance as the cost of the RDTSC
instruction varies depending upon the host CPU microarchitecture.</p>
</div>
<div class="section" id="user-supplied-timestamp">
<h3>User-Supplied Timestamp<a class="headerlink" href="#user-supplied-timestamp" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="api.html#c.XTR_LOG_TS" title="XTR_LOG_TS"><code class="xref c c-macro docutils literal notranslate"><span class="pre">XTR_LOG_TS</span></code></a> macro and it’s variants listed under the
<a class="reference internal" href="api.html#user-supplied-timestamp-macros"><span class="std std-ref">user-supplied timestamp macros</span></a> section of the
API reference all allow passing a user-supplied timestamp to the logger as the second
argument. Any type may be passed as long as it has a formatter defined
(see <a class="reference internal" href="#custom-formatters"><span class="std std-ref">custom formatters</span></a>).</p>
<div class="section" id="id7">
<h4>Examples<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;xtr/logger.hpp&gt;</span><span class="cp"></span>

<span class="w">    </span><span class="k">template</span><span class="o">&lt;&gt;</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">fmt</span><span class="o">::</span><span class="n">formatter</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">timespec</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">ParseContext</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">            </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">parse</span><span class="p">(</span><span class="n">ParseContext</span><span class="w"> </span><span class="o">&amp;</span><span class="n">ctx</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="n">ctx</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>

<span class="w">            </span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">FormatContext</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">            </span><span class="k">auto</span><span class="w"> </span><span class="n">format</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">timespec</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ts</span><span class="p">,</span><span class="w"> </span><span class="n">FormatContext</span><span class="w"> </span><span class="o">&amp;</span><span class="n">ctx</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="n">format_to</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="n">out</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;{}.{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ts</span><span class="p">.</span><span class="n">tv_sec</span><span class="p">,</span><span class="w"> </span><span class="n">ts</span><span class="p">.</span><span class="n">tv_nsec</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">};</span><span class="w"></span>

<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">xtr</span><span class="o">::</span><span class="n">logger</span><span class="w"> </span><span class="n">log</span><span class="p">;</span><span class="w"></span>

<span class="w">            </span><span class="n">xtr</span><span class="o">::</span><span class="n">sink</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">log</span><span class="p">.</span><span class="n">get_sink</span><span class="p">(</span><span class="s">&quot;Main&quot;</span><span class="p">);</span><span class="w"></span>

<span class="w">            </span><span class="n">XTR_LOG_TS</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">timespec</span><span class="p">{</span><span class="mi">123</span><span class="p">,</span><span class="w"> </span><span class="mi">456</span><span class="p">}),</span><span class="w"> </span><span class="s">&quot;Hello world&quot;</span><span class="p">);</span><span class="w"></span>

<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>View this example on <a class="reference external" href="https://godbolt.org/z/GcffPWjvz">Compiler Explorer</a>.</p>
</div>
</div>
</div>
<div class="section" id="background-consumer-thread-details">
<h2>Background Consumer Thread Details<a class="headerlink" href="#background-consumer-thread-details" title="Permalink to this headline">¶</a></h2>
<p>As no system calls are made when a log statement is made, the consumer
thread must spin waiting for input (it cannot block/wait as there would
be no way to signal that doesn’t involve a system call). This is simply
done as a performance/efficiency trade-off; log statements become cheaper
at the cost of the consumer thread being wasteful.</p>
<div class="section" id="lifetime">
<h3>Lifetime<a class="headerlink" href="#lifetime" title="Permalink to this headline">¶</a></h3>
<p>The consumer thread associated with a given logger will terminate only
when the logger and all associated sinks have been destructed, and is
joined by the logger destructor. This means that when the logger
destructs, it will block until all associated sinks have also destructed.</p>
<p>This is done to prevent creating ‘orphan’ sinks which are open but not being
read from by a logger. This should make using the logger easier as sinks will
never lose data and will never be disconnected from the associated logger
unless they are explicitly disconnected by closing the sink.</p>
</div>
<div class="section" id="cpu-affinity">
<h3>CPU Affinity<a class="headerlink" href="#cpu-affinity" title="Permalink to this headline">¶</a></h3>
<p>To bind the background thread to a specific CPU
<a class="reference internal" href="api.html#_CPPv4N3xtr6logger29consumer_thread_native_handleEv" title="xtr::logger::consumer_thread_native_handle"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">xtr::logger::consumer_thread_native_handle()</span></code></a> can be used to obtain
the consumer thread’s platform specific thread handle. The handle can then be
used with whatever platform specific functionality is available for setting
thread affinities—for example
<a class="reference external" href="https://www.man7.org/linux/man-pages/man3/pthread_setaffinity_np.3.html">pthread_setaffinity_np(3)</a>
on Linux.</p>
<div class="section" id="id8">
<h4>Examples<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;xtr/logger.hpp&gt;</span><span class="cp"></span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;cerrno&gt;</span><span class="cp"></span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pthread.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sched.h&gt;</span><span class="cp"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">xtr</span><span class="o">::</span><span class="n">logger</span><span class="w"> </span><span class="n">log</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="kt">cpu_set_t</span><span class="w"> </span><span class="n">cpus</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">CPU_ZERO</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cpus</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">CPU_SET</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">cpus</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">handle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">log</span><span class="p">.</span><span class="n">consumer_thread_native_handle</span><span class="p">();</span><span class="w"></span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">errnum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">::</span><span class="n">pthread_setaffinity_np</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">cpus</span><span class="p">),</span><span class="w"> </span><span class="o">&amp;</span><span class="n">cpus</span><span class="p">))</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">errno</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">errnum</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">perror</span><span class="p">(</span><span class="s">&quot;pthread_setaffinity_np&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="n">xtr</span><span class="o">::</span><span class="n">sink</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">log</span><span class="p">.</span><span class="n">get_sink</span><span class="p">(</span><span class="s">&quot;Main&quot;</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">XTR_LOG</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello world&quot;</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>View this example on <a class="reference external" href="https://godbolt.org/z/1vh5exK4K">Compiler Explorer</a>.</p>
</div>
</div>
</div>
<div class="section" id="log-message-sanitizing">
<h2>Log Message Sanitizing<a class="headerlink" href="#log-message-sanitizing" title="Permalink to this headline">¶</a></h2>
<p>Terminal escape sequences and unprintable characters in string arguments are escaped
for security. This is done because string arguments may contain user-supplied strings,
which a malicious user could take advantage of to place terminal escape sequences into
the log file. If these escape sequences are not removed by the logger then they could
be interpreted by the terminal emulator of a user viewing the log. Most terminal
emulators are sensible about the escape sequences they interpret, however it is still
good practice for a logger to err on the side of caution and remove them from string
arguments.
Please refer to
<a class="reference external" href="https://seclists.org/fulldisclosure/2003/Feb/att-341/Termulation.txt">this document</a>
posted to the full-disclosure mailing list for a more thorough explanation of terminal
escape sequence attacks.</p>
</div>
<div class="section" id="log-rotation">
<h2>Log Rotation<a class="headerlink" href="#log-rotation" title="Permalink to this headline">¶</a></h2>
<p>Please refer to the <a class="reference internal" href="xtrctl.html#reopening-log-files"><span class="std std-ref">reopening log files</span></a> section of
the <a class="reference internal" href="xtrctl.html#xtrctl"><span class="std std-ref">xtrctl</span></a> guide.</p>
</div>
<div class="section" id="custom-back-ends">
<h2>Custom Back-ends<a class="headerlink" href="#custom-back-ends" title="Permalink to this headline">¶</a></h2>
<p>The logger allows custom back-ends to be used. This is done by implementing the
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">xtr::storage_interface</span></code> abstract class:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">xtr</span><span class="o">::</span><span class="n">storage_interface</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">span</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span><span class="w"> </span><span class="n">allocate_buffer</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">submit_buffer</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">size</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">flush</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">sync</span><span class="p">()</span><span class="w"> </span><span class="k">noexcept</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">reopen</span><span class="p">()</span><span class="w"> </span><span class="k">noexcept</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="o">~</span><span class="n">storage_interface</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">default</span><span class="p">;</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>

<span class="k">using</span><span class="w"> </span><span class="n">storage_interface_ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">storage_interface</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>Storage interface objects are then passed to the <code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">xtr::storage_interface_ptr</span></code>
argument of the <a class="reference external" href="api.html#_CPPv4I0EN3xtr6logger6loggerE21storage_interface_ptrRR5ClockNSt6stringE17log_level_style_t">custom back-end constructor</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All back-end functions are invoked from the logger’s background thread.</p>
</div>
<dl class="field-list">
<dt class="field-odd">allocate_buffer and submit_buffer</dt>
<dd class="field-odd"><p>The <em>allocate_buffer</em> function is called by the logger to obtain a buffer
where formatted log data will be written to. When the logger has finished
writing to the buffer it is passed back to the back-end by calling
<em>submit_buffer</em>.</p>
<ul class="simple">
<li><p>The logger will not allocate a buffer without first submitting the previous
buffer, if one exists.</p></li>
<li><p>Only the pointer returned by <span class="cpp-expr sig sig-inline cpp"><span class="n">std</span><span class="p">::</span><span class="n">span</span><span class="p">::</span><span class="n">data</span><span class="p">(</span><span class="p">)</span></span> will be passed
to the <em>buf</em> argument of submit_buffer.</p></li>
<li><p>Partial buffers may be submitted, i.e. the <em>size</em> argument passed to
submit_buffer may be smaller than the span returned by allocate_buffer.
After a partial buffer is submitted, the logger will allocate a new buffer.</p></li>
</ul>
</dd>
<dt class="field-even">flush</dt>
<dd class="field-even"><p>The <em>flush</em> function is invoked to indicate that the back-end should write
any buffered data to its associated backing store.</p>
</dd>
<dt class="field-odd">sync</dt>
<dd class="field-odd"><p>The <em>sync</em> function is invoked to indicate that the back-end should ensure
that all data written to the associated backing store has reached permanent
storage.</p>
</dd>
<dt class="field-even">reopen</dt>
<dd class="field-even"><p>The <em>reopen</em> function is invoked to indicate that if the back-end has a regular
file opened for writing log data then the file should be reopened. This is
intended to be used to implement log rotation via tool such as
<a class="reference external" href="https://www.man7.org/linux/man-pages/man8/logrotate.8.html">logrotate(8)</a>.
Please refer to the <a class="reference internal" href="xtrctl.html#reopening-log-files"><span class="std std-ref">Reopening Log Files</span></a> section
of the <a class="reference internal" href="xtrctl.html#xtrctl"><span class="std std-ref">xtrctl</span></a> documentation for further details.</p>
<p>The return value should be either zero on success or an
<a class="reference external" href="https://www.man7.org/linux/man-pages/man3/errno.3.html">errno(3)</a>
compatible error number on failure.</p>
</dd>
<dt class="field-odd">destructor</dt>
<dd class="field-odd"><p>Upon destruction the back-end should flush any buffered data and close the
associated backing store.</p>
</dd>
</dl>
<div class="section" id="id9">
<h3>Examples<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<p>Using the <a class="reference external" href="api.html#_CPPv4I0EN3xtr6logger6loggerE21storage_interface_ptrRR5ClockNSt6stringE17log_level_style_t">custom back-end constructor</a>
to create a logger with a storage back-end that discards all input:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;xtr/logger.hpp&gt;</span><span class="cp"></span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;span&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;cstddef&gt;</span><span class="cp"></span>

<span class="k">namespace</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">discard_storage</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">xtr</span><span class="o">::</span><span class="n">storage_interface</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">span</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span><span class="w"> </span><span class="n">allocate_buffer</span><span class="p">()</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">buf</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="n">submit_buffer</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">size</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="n">flush</span><span class="p">()</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="n">sync</span><span class="p">()</span><span class="w"> </span><span class="k">noexcept</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">reopen</span><span class="p">()</span><span class="w"> </span><span class="k">noexcept</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="kt">char</span><span class="w"> </span><span class="n">buf</span><span class="p">[</span><span class="mi">1024</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="p">};</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="n">main</span><span class="p">()</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">xtr</span><span class="o">::</span><span class="n">logger</span><span class="w"> </span><span class="nf">log</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">discard_storage</span><span class="o">&gt;</span><span class="p">());</span><span class="w"></span>

<span class="w">    </span><span class="n">xtr</span><span class="o">::</span><span class="n">sink</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">log</span><span class="p">.</span><span class="n">get_sink</span><span class="p">(</span><span class="s">&quot;Main&quot;</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">XTR_LOG</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello world&quot;</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>View this example on <a class="reference external" href="https://godbolt.org/z/W4YE7YqPr">Compiler Explorer</a>.</p>
</div>
</div>
<div class="section" id="custom-log-level-styles">
<h2>Custom Log Level Styles<a class="headerlink" href="#custom-log-level-styles" title="Permalink to this headline">¶</a></h2>
<p>The text at the beginning of each log statement representing the log level of
the statement can be customised via <a class="reference internal" href="api.html#_CPPv4N3xtr6logger19set_log_level_styleE17log_level_style_t" title="xtr::logger::set_log_level_style"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">xtr::logger::set_log_level_style()</span></code></a>,
which accepts a function pointer of type
<a class="reference internal" href="api.html#_CPPv4N3xtr17log_level_style_tE" title="xtr::log_level_style_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">xtr::log_level_style_t</span></code></a>. The passed function should accept
a single argument of type <a class="reference internal" href="api.html#_CPPv4N3xtr11log_level_tE" title="xtr::log_level_t"><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">xtr::log_level_t</span></code></a> and should return
a <span class="cpp-expr sig sig-inline cpp"><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="p">*</span></span> string literal.</p>
<div class="section" id="id10">
<h3>Examples<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<p>The following example will output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">info</span><span class="p">:</span> <span class="mi">2021</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">17</span> <span class="mi">23</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">39.043028</span> <span class="n">Main</span> <span class="o">&lt;</span><span class="n">source</span><span class="o">&gt;</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span> <span class="n">Hello</span> <span class="n">world</span>
<span class="ow">not</span><span class="o">-</span><span class="n">info</span><span class="p">:</span> <span class="mi">2021</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">17</span> <span class="mi">23</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">39.043028</span> <span class="n">Main</span> <span class="o">&lt;</span><span class="n">source</span><span class="o">&gt;</span><span class="p">:</span><span class="mi">19</span><span class="p">:</span> <span class="n">Hello</span> <span class="n">world</span>
</pre></div>
</div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;xtr/logger.hpp&gt;</span><span class="cp"></span>

<span class="n">xtr</span><span class="o">::</span><span class="n">logger</span><span class="w"> </span><span class="n">log</span><span class="p">;</span><span class="w"></span>

<span class="n">xtr</span><span class="o">::</span><span class="n">sink</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">log</span><span class="p">.</span><span class="n">get_sink</span><span class="p">(</span><span class="s">&quot;Main&quot;</span><span class="p">);</span><span class="w"></span>

<span class="n">log</span><span class="p">.</span><span class="n">set_log_level_style</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="p">[](</span><span class="k">auto</span><span class="w"> </span><span class="n">level</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"></span>
<span class="w">            </span><span class="n">level</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">xtr</span><span class="o">::</span><span class="n">log_level_t</span><span class="o">::</span><span class="n">info</span><span class="w"> </span><span class="o">?</span><span class="w"></span>
<span class="w">                </span><span class="s">&quot;info: &quot;</span><span class="w"> </span><span class="o">:</span><span class="w"></span>
<span class="w">                </span><span class="s">&quot;not-info: &quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">});</span><span class="w"></span>

<span class="n">XTR_LOGL</span><span class="p">(</span><span class="n">info</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello world&quot;</span><span class="p">);</span><span class="w"></span>
<span class="n">XTR_LOGL</span><span class="p">(</span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello world&quot;</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>View this example on <a class="reference external" href="https://godbolt.org/z/ohcW6ndoz">Compiler Explorer</a>.</p>
<p class="rubric">Footnotes</p>
<dl class="footnote brackets">
<dt class="label" id="queue"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>Specifically the queue is a single-producer/single-consumer ring buffer.</p>
</dd>
</dl>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="api.html" class="btn btn-neutral float-right" title="API Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="quickstart.html" class="btn btn-neutral float-left" title="Quick-Start Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Chris E. Holloway.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>